*** ./devtools/bin/Build.osr6	Wed Mar 15 11:46:04 2006
--- ./devtools/bin/Build	Fri Mar 16 10:52:30 2007
***************
*** 407,413 ****
  		arch=PPC
  		;;
    BSD-386)	os=BSD-OS;;
!   SCO_SV)	os=SCO; rel=`uname -X | sed -n 's/Release = 3.2v//p'`;;
    UNIX_System_V) if [ "$arch" = "ds90" ]
  		then
  			os="UXPDS"
--- 407,421 ----
  		arch=PPC
  		;;
    BSD-386)	os=BSD-OS;;
!   SCO_SV)	
! 	rel=`uname -v`
! 	case $rel in
! 	6*) # OpenServer 6
! 		os=SCO.6.x ;;
! 	*)  # OpenServer 5
! 		os=SCO; rel=`uname -X | sed -n 's/Release = 3.2v//p'`;;
! 	esac
! 	;;
    UNIX_System_V) if [ "$arch" = "ds90" ]
  		then
  			os="UXPDS"
*** ./devtools/OS/SCO.6.x.osr6	Fri Mar 16 10:52:30 2007
--- ./devtools/OS/SCO.6.x	Fri Mar 16 11:09:03 2007
***************
*** 0 ****
--- 1,35 ----
+ # (based on)	$Id: UnixWare.5.i386,v 8.7 2002/10/24 20:42:46 ca Exp $
+ # OpenServer 6 port completed by Ronald Joe Record <rr@sco.com>
+ # 15-Mar-2007
+ 
+ dnl	DO NOT EDIT THIS FILE.
+ dnl	Place personal settings in devtools/Site/site.config.m4
+ 
+ #
+ # System V Rel 5.x (a.k.a Unixware7 / OpenServer 6 
+ # w/o BSD-Compatiblity Libs ie. native)
+ #	Contributed by Paul Gampe <paulg@apnic.net>
+ #
+ define(`confMAPDEF', `-DNEWDB -DMAP_REGEX')
+ define(`confSM_OS_HEADER', `sm_os_openserver6')
+ define(`confCC', `/usr/ccs/bin/cc')
+ define(`confENVDEF', `-D__svr5__')
+ define(`confLIBS', `-lsocket -lnsl -lelf')
+ define(`confSHELL', `/usr/bin/sh')
+ define(`confMBINDIR', `/usr/lib')
+ define(`confSBINDIR', `/etc/mail')
+ define(`confUBINDIR', `/etc/mail')
+ define(`confEBINDIR', `/usr/lib')
+ define(`confMANROOT', `/usr/man/man')
+ define(`confSBINGRP', `mail')
+ define(`confINSTALL', `/usr/gnu/bin/install')
+ define(`confDEPEND_TYPE', `X11')
+ define(`confMTCCOPTS', `-Kpthread')
+ define(`confOPTIMIZE',`-O2')
+ define(`confCCOPTS_SO', `-KPIC')
+ define(`confLDOPTS_SO', `-G')
+ define(`confSONAME',`-h')
+ define(`confMTLDOPTS', `-lpthread')
+ APPENDDEF(`conf_sendmail_ENVDEF', `-DSASL -DMILTER')
+ APPENDDEF(`confINCDIRS',`-I/usr/include/sasl ')
+ APPENDDEF(`conf_sendmail_LIBS', `-lsasl2 -lssl -lcrypto -lsocket')
*** ./include/sm/os/sm_os_openserver6.h.osr6	Fri Mar 16 10:52:30 2007
--- ./include/sm/os/sm_os_openserver6.h	Fri Mar 16 10:52:30 2007
***************
*** 0 ****
--- 1,43 ----
+ /*
+  * Copyright (c) 2001, 2002 Sendmail, Inc. and its suppliers.
+  *	All rights reserved.
+  *
+  * By using this file, you agree to the terms and conditions set
+  * forth in the LICENSE file which can be found at the top level of
+  * the sendmail distribution.
+  *
+  * (based on)	$Id: sm_os_unixware.h,v 1.8 2002/10/24 18:04:54 ca Exp $
+  */
+ 
+ #define SM_OS_NAME	"openserver"
+ 
+ #ifndef SM_CONF_LONGLONG
+ #  define SM_CONF_LONGLONG	1
+ #  define SM_CONF_TEST_LLONG	1
+ #  define SM_CONF_BROKEN_SIZE_T	0
+ #endif /* !SM_CONF_LONGLONG */
+ 
+ /* try LLONG tests in libsm/t-types.c? */
+ #ifndef SM_CONF_TEST_LLONG
+ # define SM_CONF_TEST_LLONG	0
+ #endif /* !SM_CONF_TEST_LLONG */
+ 
+ /* needs alarm(), our sleep() otherwise hangs. */
+ #define SM_CONF_SETITIMER	0
+ 
+ #ifndef SM_CONF_MSG
+ # define SM_CONF_MSG	1
+ #endif /* SM_CONF_MSG */
+ 
+ #ifndef SM_CONF_SHM
+ # define SM_CONF_SHM	1
+ #endif /* SM_CONF_SHM */
+ 
+ #ifndef SM_CONF_SEM
+ # define SM_CONF_SEM	2
+ #endif /* SM_CONF_SEM */
+ 
+ /* don't use flock() in mail.local.c */
+ #ifndef LDA_USE_LOCKF
+ # define LDA_USE_LOCKF	1
+ #endif /* LDA_USE_LOCKF */
*** ./libsm/t-sem.c.osr6	Mon Mar 13 12:40:43 2006
--- ./libsm/t-sem.c	Fri Mar 16 10:52:30 2007
***************
*** 15,21 ****
  #if SM_CONF_SEM
  # include <stdlib.h>
  # include <unistd.h>
! # include <sysexits.h>
  # include <sm/heap.h>
  # include <sm/string.h>
  # include <sm/signal.h>
--- 15,21 ----
  #if SM_CONF_SEM
  # include <stdlib.h>
  # include <unistd.h>
! # include <sm/sysexits.h>
  # include <sm/heap.h>
  # include <sm/string.h>
  # include <sm/signal.h>
*** ./cf/cf/generic-sco.mc.osr6	Fri Mar 16 10:52:30 2007
--- ./cf/cf/generic-sco.mc	Fri Mar 16 10:52:30 2007
***************
*** 0 ****
--- 1,28 ----
+ divert(-1)
+ #
+ # Copyright (c) 1998, 1999, 2001 Sendmail, Inc. and its suppliers.
+ #	All rights reserved.
+ # Copyright (c) 1983 Eric P. Allman.  All rights reserved.
+ # Copyright (c) 1988, 1993
+ #	The Regents of the University of California.  All rights reserved.
+ #
+ # By using this file, you agree to the terms and conditions set
+ # forth in the LICENSE file which can be found at the top level of
+ # the sendmail distribution.
+ #
+ #
+ 
+ #
+ #  This is a generic configuration file for SCO (OpenServer 5/6, UnixWare 7)
+ #
+ #  It has support for local and SMTP mail only.  If you want to
+ #  customize it, copy it to a name appropriate for your environment
+ #  and do the modifications there.
+ #
+ 
+ divert(0)dnl
+ VERSIONID(`$Id: generic-sco.mc,v 8.13 2001/06/27 21:46:30 gshapiro Exp $')
+ OSTYPE(sco)dnl
+ DOMAIN(generic)dnl
+ MAILER(local)dnl
+ MAILER(smtp)dnl
*** ./cf/cf/Makefile.osr6	Mon Jun 13 19:16:34 2005
--- ./cf/cf/Makefile	Fri Mar 16 10:52:30 2007
***************
*** 189,194 ****
--- 189,195 ----
  	${CFDIR}/ostype/qnx.m4 \
  	${CFDIR}/ostype/riscos4.5.m4 \
  	${CFDIR}/ostype/sco-uw-2.1.m4 \
+ 	${CFDIR}/ostype/sco.m4 \
  	${CFDIR}/ostype/sco3.2.m4 \
  	${CFDIR}/ostype/sinix.m4 \
  	${CFDIR}/ostype/solaris2.m4 \
*** ./cf/ostype/sco.m4.osr6	Fri Mar 16 10:52:30 2007
--- ./cf/ostype/sco.m4	Fri Mar 16 10:52:30 2007
***************
*** 0 ****
--- 1,20 ----
+ divert(-1)
+ #
+ # Copyright (c) 1998-2000 Sendmail, Inc. and its suppliers.
+ #	All rights reserved.
+ #
+ # By using this file, you agree to the terms and conditions set
+ # forth in the LICENSE file which can be found at the top level of
+ # the sendmail distribution.
+ #
+ #
+ 
+ divert(0)
+ VERSIONID(`$Id: sco.m4,v 8.8 2000/02/26 01:32:04 gshapiro Exp $')
+ ifdef(`QUEUE_DIR',, `define(`QUEUE_DIR', /var/spool/mqueue)')dnl
+ define(`confEBINDIR', `/usr/lib')dnl
+ define(`confTIME_ZONE', `USE_TZ')dnl
+ ifdef(`LOCAL_MAILER_PATH',, `define(`LOCAL_MAILER_PATH', /etc/mail/slocal)')dnl
+ _DEFIFNOT(`LOCAL_MAILER_FLAGS', `Puho9')dnl
+ ifdef(`LOCAL_MAILER_ARGS',, `define(`LOCAL_MAILER_ARGS', `slocal -user $u')')dnl
+ ifdef(`LOCAL_SHELL_FLAGS',, `define(`LOCAL_SHELL_FLAGS', Peu)')dnl
*** ./Build-OSR6.osr6	Fri Mar 16 10:52:30 2007
--- ./Build-OSR6	Fri Mar 16 10:52:30 2007
***************
*** 0 ****
--- 1,8 ----
+ #!/bin/sh
+ 
+ ./Build 2>&1 | tee Build.log
+ 
+ cd cf/cf
+ cp generic-sco.mc sendmail.mc
+ sh Build sendmail.cf 2>&1 | tee Build.log
+ 
*** ./Install-OSR6.osr6	Fri Mar 16 10:52:30 2007
--- ./Install-OSR6	Fri Mar 16 10:52:30 2007
***************
*** 0 ****
--- 1,33 ----
+ #!/bin/sh
+ 
+ DESTDIR=/u/tmp/sendmail
+ export DESTDIR
+ 
+ [ -d $DESTDIR ] && rm -rf $DESTDIR
+ 
+ mkdir -p $DESTDIR/usr/lib
+ for i in 1 5 8
+ do
+     mkdir -p $DESTDIR/usr/man/man$i
+     mkdir -p $DESTDIR/usr/man/cat$i
+ done
+ mkdir -p $DESTDIR/etc/mail
+ 
+ /etc/userls -l smmsp 2>&1 > /dev/null || /etc/useradd smmsp
+ /etc/groupls -g smmsp 2>&1 > /dev/null || /etc/groupadd smmsp
+ 
+ cd cf/cf
+ sh Build install-cf DESTDIR=$DESTDIR 2>&1 | tee Build-install-cf.log
+ cd ../..
+ for i in obj.SCO.6.x*/*
+ do
+   [ -d $i ] && {
+     b=`basename $i`
+     [ -d $b ] && {
+       cd $b
+       sh Build install DESTDIR=$DESTDIR 2>&1 | tee Build-install.log
+       cd ..
+     }
+   }
+ done
+ sh Build install DESTDIR=$DESTDIR 2>&1 | tee Build-install.log
